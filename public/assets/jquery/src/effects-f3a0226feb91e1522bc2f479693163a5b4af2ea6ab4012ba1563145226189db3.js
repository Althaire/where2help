define(["./core","./var/pnum","./css/var/cssExpand","./css/var/isHidden","./css/defaultDisplay","./data/var/data_priv","./core/init","./effects/Tween","./queue","./css","./deferred","./traversing"],function(e,t,n,r,i,a){function o(){return setTimeout(function(){f=void 0}),f=e.now()}function s(e,t){var r,i=0,a={height:e};for(t=t?1:0;4>i;i+=2-t)r=n[i],a["margin"+r]=a["padding"+r]=e;return t&&(a.opacity=a.width=e),a}function u(e,t,n){for(var r,i=(y[t]||[]).concat(y["*"]),a=0,o=i.length;o>a;a++)if(r=i[a].call(n,t,e))return r}function l(t,n,o){var s,l,c,d,f,h,m,g,v=this,y={},_=t.style,b=t.nodeType&&r(t),T=a.get(t,"fxshow");o.queue||(f=e._queueHooks(t,"fx"),null==f.unqueued&&(f.unqueued=0,h=f.empty.fire,f.empty.fire=function(){f.unqueued||h()}),f.unqueued++,v.always(function(){v.always(function(){f.unqueued--,e.queue(t,"fx").length||f.empty.fire()})})),1===t.nodeType&&("height"in n||"width"in n)&&(o.overflow=[_.overflow,_.overflowX,_.overflowY],m=e.css(t,"display"),g="none"===m?a.get(t,"olddisplay")||i(t.nodeName):m,"inline"===g&&"none"===e.css(t,"float")&&(_.display="inline-block")),o.overflow&&(_.overflow="hidden",v.always(function(){_.overflow=o.overflow[0],_.overflowX=o.overflow[1],_.overflowY=o.overflow[2]}));for(s in n)if(l=n[s],p.exec(l)){if(delete n[s],c=c||"toggle"===l,l===(b?"hide":"show")){if("show"!==l||!T||void 0===T[s])continue;b=!0}y[s]=T&&T[s]||e.style(t,s)}else m=void 0;if(e.isEmptyObject(y))"inline"===("none"===m?i(t.nodeName):m)&&(_.display=m);else{T?"hidden"in T&&(b=T.hidden):T=a.access(t,"fxshow",{}),c&&(T.hidden=!b),b?e(t).show():v.done(function(){e(t).hide()}),v.done(function(){var n;a.remove(t,"fxshow");for(n in y)e.style(t,n,y[n])});for(s in y)d=u(b?T[s]:0,s,v),s in T||(T[s]=d.start,b&&(d.end=d.start,d.start="width"===s||"height"===s?1:0))}}function c(t,n){var r,i,a,o,s;for(r in t)if(i=e.camelCase(r),a=n[i],o=t[r],e.isArray(o)&&(a=o[1],o=t[r]=o[0]),r!==i&&(t[i]=o,delete t[r]),s=e.cssHooks[i],s&&"expand"in s){o=s.expand(o),delete t[i];for(r in o)r in t||(t[r]=o[r],n[r]=a)}else n[i]=a}function d(t,n,r){var i,a,s=0,l=v.length,d=e.Deferred().always(function(){delete h.elem}),h=function(){if(a)return!1;for(var e=f||o(),n=Math.max(0,p.startTime+p.duration-e),r=n/p.duration||0,i=1-r,s=0,u=p.tweens.length;u>s;s++)p.tweens[s].run(i);return d.notifyWith(t,[p,i,n]),1>i&&u?n:(d.resolveWith(t,[p]),!1)},p=d.promise({elem:t,props:e.extend({},n),opts:e.extend(!0,{specialEasing:{}},r),originalProperties:n,originalOptions:r,startTime:f||o(),duration:r.duration,tweens:[],createTween:function(n,r){var i=e.Tween(t,p.opts,n,r,p.opts.specialEasing[n]||p.opts.easing);return p.tweens.push(i),i},stop:function(e){var n=0,r=e?p.tweens.length:0;if(a)return this;for(a=!0;r>n;n++)p.tweens[n].run(1);return e?d.resolveWith(t,[p,e]):d.rejectWith(t,[p,e]),this}}),m=p.props;for(c(m,p.opts.specialEasing);l>s;s++)if(i=v[s].call(p,t,m,p.opts))return i;return e.map(m,u,p),e.isFunction(p.opts.start)&&p.opts.start.call(t,p),e.fx.timer(e.extend(h,{elem:t,anim:p,queue:p.opts.queue})),p.progress(p.opts.progress).done(p.opts.done,p.opts.complete).fail(p.opts.fail).always(p.opts.always)}var f,h,p=/^(?:toggle|show|hide)$/,m=new RegExp("^(?:([+-])=|)("+t+")([a-z%]*)$","i"),g=/queueHooks$/,v=[l],y={"*":[function(t,n){var r=this.createTween(t,n),i=r.cur(),a=m.exec(n),o=a&&a[3]||(e.cssNumber[t]?"":"px"),s=(e.cssNumber[t]||"px"!==o&&+i)&&m.exec(e.css(r.elem,t)),u=1,l=20;if(s&&s[3]!==o){o=o||s[3],a=a||[],s=+i||1;do u=u||".5",s/=u,e.style(r.elem,t,s+o);while(u!==(u=r.cur()/i)&&1!==u&&--l)}return a&&(s=r.start=+s||+i||0,r.unit=o,r.end=a[1]?s+(a[1]+1)*a[2]:+a[2]),r}]};return e.Animation=e.extend(d,{tweener:function(t,n){e.isFunction(t)?(n=t,t=["*"]):t=t.split(" ");for(var r,i=0,a=t.length;a>i;i++)r=t[i],y[r]=y[r]||[],y[r].unshift(n)},prefilter:function(e,t){t?v.unshift(e):v.push(e)}}),e.speed=function(t,n,r){var i=t&&"object"==typeof t?e.extend({},t):{complete:r||!r&&n||e.isFunction(t)&&t,duration:t,easing:r&&n||n&&!e.isFunction(n)&&n};return i.duration=e.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in e.fx.speeds?e.fx.speeds[i.duration]:e.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){e.isFunction(i.old)&&i.old.call(this),i.queue&&e.dequeue(this,i.queue)},i},e.fn.extend({fadeTo:function(e,t,n,i){return this.filter(r).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(t,n,r,i){var o=e.isEmptyObject(t),s=e.speed(n,r,i),u=function(){var n=d(this,e.extend({},t),s);(o||a.get(this,"finish"))&&n.stop(!0)};return u.finish=u,o||s.queue===!1?this.each(u):this.queue(s.queue,u)},stop:function(t,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof t&&(r=n,n=t,t=void 0),n&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var n=!0,o=null!=t&&t+"queueHooks",s=e.timers,u=a.get(this);if(o)u[o]&&u[o].stop&&i(u[o]);else for(o in u)u[o]&&u[o].stop&&g.test(o)&&i(u[o]);for(o=s.length;o--;)s[o].elem!==this||null!=t&&s[o].queue!==t||(s[o].anim.stop(r),n=!1,s.splice(o,1));(n||!r)&&e.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var n,r=a.get(this),i=r[t+"queue"],o=r[t+"queueHooks"],s=e.timers,u=i?i.length:0;for(r.finish=!0,e.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),n=s.length;n--;)s[n].elem===this&&s[n].queue===t&&(s[n].anim.stop(!0),s.splice(n,1));for(n=0;u>n;n++)i[n]&&i[n].finish&&i[n].finish.call(this);delete r.finish})}}),e.each(["toggle","show","hide"],function(t,n){var r=e.fn[n];e.fn[n]=function(e,t,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(s(n,!0),e,t,i)}}),e.each({slideDown:s("show"),slideUp:s("hide"),slideToggle:s("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,n){e.fn[t]=function(e,t,r){return this.animate(n,e,t,r)}}),e.timers=[],e.fx.tick=function(){var t,n=0,r=e.timers;for(f=e.now();n<r.length;n++)t=r[n],t()||r[n]!==t||r.splice(n--,1);r.length||e.fx.stop(),f=void 0},e.fx.timer=function(t){e.timers.push(t),t()?e.fx.start():e.timers.pop()},e.fx.interval=13,e.fx.start=function(){h||(h=setInterval(e.fx.tick,e.fx.interval))},e.fx.stop=function(){clearInterval(h),h=null},e.fx.speeds={slow:600,fast:200,_default:400},e});